!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(1)),i=r(n(7)),s=o(n(2));let d;a.default.Agent&&(d=new a.default.Agent({keepAlive:!0}));t.Request=class{constructor(e,t={}){this.version=s.version,this.url=e,t||(t={"Content-Type":"application/json","User-Agent":"dbnapi/"+this.version})}post(e,t){const n=this.headers;return new Promise((r,o)=>{try{i.default(`https://${this.url}/api/${e}`,{method:"post",body:JSON.stringify(t),headers:n,agent:d}).then(e=>r(e.json()))}catch(e){o(e)}})}get(e){const t=this.headers;return new Promise((n,r)=>{try{i.default(`https://${this.url}/api/${e}`,{method:"get",headers:t,agent:d}).then(e=>n(e.json()))}catch(e){r(e)}})}}},function(e,t){e.exports=require("https")},function(e){e.exports={name:"node-dbnapi",version:"1.0.0",scripts:{"gulp:lint":"gulp tslint",lint:"npm run gulp:lint -s",webpack:"webpack"},main:"dist/index.js",license:"MIT",author:{name:"Billy Addlers <Riichi Rusdiana>",email:"finnsonalca123@gmail.com",url:"https://j-dev.xyz"},contributors:[{name:"Billy Addlers <Riichi Rusdiana>",email:"finnsonalca123@gmail.com",url:"https://j-dev.xyz"}],devDependencies:{"@types/node":"^12.0.0","@types/node-fetch":"^2.3.3",chalk:"^2.4.2","dtsbundler-webpack-plugin":"^1.0.0",gulp:"^4.0.1","gulp-tslint":"^8.1.4","gulp-typescript":"^5.0.1","jsdoc-to-markdown":"^4.0.1",ora:"^3.4.0",rimraf:"^2.6.3","ts-loader":"^5.4.5",tslint:"^5.16.0","tslint-eslint-rules":"^5.4.0",typescript:"^3.4.5",webpack:"^4.30.0","webpack-cli":"^3.3.2","webpack-node-externals":"^1.7.2"},dependencies:{"node-fetch":"^2.5.0"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.User=class{constructor(e){this.id=e.id,this.username=e.username,this.discriminator=e.discriminator,this.tag=e.tag,this.avatar=e.avatar,this.avatarURL=e.avatarURL,this.displayAvatarURL=e.displayAvatarURL,this.bot=e.bot,this.createdTimestamp=e.createdTimestamp,this.createdAt=e.createdAt,this.bots=e.bots}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Bot=class{constructor(e){this.id=e.id,this.username=e.username,this.discriminator=e.discriminator,this.tag=e.tag,this.avatar=e.avatar,this.avatarURL=e.avatarURL,this.displayAvatarURL=e.displayAvatarURL,this.bot=e.bot,this.createdTimestamp=e.createdTimestamp,this.createdAt=e.createdAt,this.metadata=e.metadata,this.ownedBy=e.ownedBy}getMeta(){return this.metadata}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(6);t.Main=o.Main;const a=n(0);t.Request=a.Request;const i=n(4);t.Bot=i.Bot;const s=n(3);t.User=s.User;const d=r(n(10));t.http=d.default;const c=r(n(1));t.https=c.default,t.default=o.Main},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),a=r(n(2)),i=n(3),s=n(4),d=n(8);t.Main=class{constructor(e,t,n){this.version=a.default.version;const r={"Content-Type":"application/json","User-Agent":`dbnapi/${this.version}`};this.request=new o.Request("https://discordbots.xyz/api",r),this.token=e,this.clientid=t,this.ownerid=n,this.sessionid=null,(e||void 0!==e||""!==e)&&this.tokenValidator(e).then(r=>{if(!1===r)throw new d.ErrCode("INVALID_TOKEN");!0===r&&this.fetchToken(e,t,n).then(e=>{this.sessionid=e.ownedBy.username,console.log(`[DBNAPI] You are logged in as: ${e.ownedBy.tag}`)})})}async fetchUser(e){if(!e)throw new d.ErrCode("INVALID_OWNER_ID_NULL");const{body:t}=await this.request.get(`fetchUser?id=${e}`);if("unknown_user"===t.error)return;if(!0===t.bot){const{body:n}=await this.request.get(`bots/${e}`),r=n,o=t,a={id:o.id,username:o.username,discriminator:o.discriminator,tag:o.tag,avatar:o.avatar,avatarURL:o.avatarURL,displayAvatarURL:o.displayAvatarURL,bot:o.bot,createdTimestamp:o.createdTimestamp,createdAt:new Date(o.createdTimestamp.toString()),metadata:r,ownedBy:o.ownedBy};return new s.Bot(a)}const n=t,r={id:n.id,username:n.username,discriminator:n.discriminator,tag:n.tag,avatar:n.avatar,avatarURL:n.avatarURL,displayAvatarURL:n.displayAvatarURL,bot:n.bot,createdAt:new Date(n.createdTimestamp.toString()),createdTimestamp:n.createdTimestamp,bots:n.bots};return new i.User(r)}async tokenValidator(e){const t=await this.request.post("tokenValidator",{token:e});return!1!==(await t.body).isThatTokenValid}async fetchToken(e,t,n){const{body:r}=await this.request.post("fetchToken",{token:e}),o=r;let a=o.ownedBy,i={valid:o.valid,owned:o.owned,ownedBy:a};if(!1===o.valid)throw new d.ErrCode("INVALID_TOKEN");if(!1===o.owned||void 0===o.ownedBy)return{valid:!1,owned:!1,ownedBy:a=void 0};if(null===o.ownedBy||void 0===o.ownedBy)return{valid:!1,owned:!1,ownedBy:a=void 0};const s=[];if(a.bots.forEach(e=>{s.push(e.botID)}),!s.includes(t)){const e=await this.fetchUser(t);if(!e)throw new d.ErrCode("INVALID_CLIENT_ID_NULL");if(!0!==e.bot)throw new d.ErrCode("NOT_A_BOT",t);throw new d.ErrCode("NOT_OWNER",e.tag)}if(!await this.fetchUser(n))throw new d.ErrCode("INVALID_OWNER_ID_NULL");return i}}},function(e,t){e.exports=require("node-fetch")},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(9)),a="[DBNAPI Error]";t.ErrCode=class extends Error{constructor(e,...t){const n=function(e,t){const n=e=>a+" "+e;let r;switch(e){case"INVALID_TOKEN":r={content:n("Your token is invalid!"),errno:401};case"NOT_AN_USER":r={content:n(`${t[0]} is not a valid User!`),errno:401};case"INVALID_OWNER_ID_NULL":r={content:n("Invalid Owner ID!!"),errno:401};case"INVALID_CLIENT_ID_NULL":r={content:n("Invalid Client ID!!"),errno:401};case"INVALID_ID":r={content:n(`Cannot find User with ID ${t[0]}`),errno:401};case"NOT_OWNER":r={content:n(`You are not Owner of ${t[0]} Bot!`),errno:401};case"NOT_A_BOT":r={content:n(`The ${t[0]} ID doesn't belong to any bot`),errno:401};case"TEST":r={content:n("This is a test error. Connection is fast and steady!"),errno:200};default:r={content:n("Connection is going on and on!"),errno:200}}return r}(e,t);super(n.content),this.header=a,this.code=n.content,this.errno=n.errno,this.name=`${this.errno} || ${o.default(this.errno)}`}get name(){return this.name}set name(e){throw new Error('"name" is unfathomable!')}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=new Map,o={100:"Continue",101:"Switching Protocol",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choice",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Unused",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",419:"Misdirected Request",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",507:"Insufficient Storage",511:"Network Authentication Required"};t.default=function(e){for(const[e,t]of Object.entries(o))r.set(parseInt(e),t);return r.get(e)},t.getErrCodeList=function(){return{default:o,toMap:()=>{for(const[e,t]of Object.entries(o))r.set(parseInt(e),t);return r},keys:()=>Object.keys(o),values:()=>Object.values(o),entries:()=>Object.entries(o)}}},function(e,t){e.exports=require("http")}]);